<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Design pattern : Le singleton | Au coin d'une table</title><meta name=keywords content="java,design pattern"><meta name=description content="Le design pattern le plus simple"><meta name=author content="Isammoc"><link rel=canonical href=https://blog.isammoc.net/blog/2011/10/05/singleton/><link href=/assets/css/stylesheet.min.0ef71315edca03ac3fb4b85c2eaba80d9aa9c097f62b53e704ebe8e433907e89.css integrity="sha256-DvcTFe3KA6w/tLhcLquoDZqpwJf2K1PnBOvo5DOQfok=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.isammoc.net/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.isammoc.net/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.isammoc.net/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.isammoc.net/apple-touch-icon.png><link rel=mask-icon href=https://blog.isammoc.net/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.80.0"><meta property="og:title" content="Design pattern : Le singleton"><meta property="og:description" content="Le design pattern le plus simple"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.isammoc.net/blog/2011/10/05/singleton/"><meta property="article:published_time" content="2011-10-05T00:00:00+00:00"><meta property="article:modified_time" content="2011-10-05T00:00:00+00:00"><meta property="og:site_name" content="Au coin d'une table"><meta name=twitter:card content="summary"><meta name=twitter:title content="Design pattern : Le singleton"><meta name=twitter:description content="Le design pattern le plus simple"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blogs","item":"https://blog.isammoc.net/blog/"},{"@type":"ListItem","position":2,"name":"Design pattern : Le singleton","item":"https://blog.isammoc.net/blog/2011/10/05/singleton/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Design pattern : Le singleton","name":"Design pattern : Le singleton","description":"Il y a un an ou deux, j’ai utilisé mon temps libre pour mettre en place une mailing-list décrivant certains points de la programmation orientée objet, et les premiers sujets …","keywords":["java","design pattern"],"articleBody":"Il y a un an ou deux, j’ai utilisé mon temps libre pour mettre en place une mailing-list décrivant certains points de la programmation orientée objet, et les premiers sujets étaient tout naturellement les design patterns. Je profite donc de l’ouverture de mon blog pour ne pas perdre ces données.\n Description du problème Nous désirons un type dont on ne peut avoir qu’une seule instance (ou un nombre limité d’instances) durant toute l’exécution du programme. L’intérêt est de créer une instance commune car l’on a aucune utilité à venir dupliquer des instances faisant finalement un travail commun et répétitif. On se situe en fait dans une approche de classe à instance unique.\n Exemples de cas :\n   Gérer les propriétés de l’application dans son ensemble\n  Maintenir une connexion à une base de données\n  Maintenir un seul et même fichier dans un module de journalisation\n  Maintenir un objet gérant des données et valeurs globales tel qu’un cache.\n   On verra que l’on peut utiliser le Singleton de façon complémentaire d’autres pattern, tels que la fabrique abstraite, le monteur, le prototype, ou état.\n   Description de la solution Deux aspects majeurs du problème sont à prendre en compte.\n Empêcher la création de multiples instances de la classe Le problème est vite réglé : il suffit de déclarer le constructeur comme privé. Ainsi il sera impossible de créer une instance de la classe à l’extérieur de la classe elle-même. On pourra également déclarer le destructeur comme privé pour empêcher une destruction prématurée de l’instance unique par mégarde.\n  Assurer une instance de la classe Pour cela, cette classe va posséder comme variable membre une référence vers une instance d’elle-même. Pour que cette instance soit accessible tout au long du programme, et donc pour qu’elle existe de sa création à la fin du programme, on va déclarer cet objet comme static.\n  Figure 1. Diagramme de classe du pattern singleton  Exemple en java\n Directement copié collé depuis Wikipédia :\n public class Singleton { private static Singleton INSTANCE = null; /** * La présence d'un constructeur privé supprime * le constructeur public par défaut. */ private Singleton() {} /** * Le mot-clé synchronized sur la méthode de création * empêche toute instanciation multiple même par * différents threads. * Retourne l'instance du singleton. */ public synchronized static Singleton getInstance() { if (INSTANCE == null) INSTANCE = new Singleton(); return INSTANCE; } }      Conséquences Nous avons donc un et un seul objet. Que ce soit pour utiliser moins de mémoire, ou pour partager des données d’un bout à l’autre de l’application.\n Il faut néanmoins penser au multi-threading, et donc la règle générale veut que la méthode statique getInstance ne puisse être accédée par un seul thread en même temps (pour assurer l’unicité de l’instance) ainsi que ses autres méthodes si nécessaires.\n   Références Wikipédia\n   http://fr.wikipedia.org/wiki/Singleton_(patron_de_conception)\n  http://en.wikipedia.org/wiki/Singleton_pattern\n   Java village\n   http://jvillage.wordpress.com/2007/06/19/design-pattern-de-creation-singleton/\n   Developpez.com\n   http://smeric.developpez.com/java/uml/singleton/\n   Autres\n   http://tfc.duke.free.fr/coding/singleton.html\n  http://www.journaldunet.com/developpeur/tutoriel/jav/070911-design-pattern-singleton/2.shtml\n     ","wordCount":"472","inLanguage":"en","datePublished":"2011-10-05T00:00:00Z","dateModified":"2011-10-05T00:00:00Z","author":{"@type":"Person","name":"Isammoc"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.isammoc.net/blog/2011/10/05/singleton/"},"publisher":{"@type":"Organization","name":"Au coin d'une table","logo":{"@type":"ImageObject","url":"https://blog.isammoc.net/favicon.ico"}}}</script></head><body id=top><script>if(localStorage.getItem("pref-theme")==="dark"){document.body.classList.add('dark');}else if(localStorage.getItem("pref-theme")==="light"){document.body.classList.remove('dark')}else if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');}</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://blog.isammoc.net/ accesskey=h title="Au coin d'une table (Alt + H)"><img src=/apple-touch-icon.png alt=logo aria-label=logo height=35>Au coin d'une table</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu onscroll=menu_on_scroll()><li><a href=https://blog.isammoc.net/categories/ title=categories><span>categories</span></a></li><li><a href=https://blog.isammoc.net/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Design pattern : Le singleton</h1><div class=post-description>Le design pattern le plus simple</div><div class=post-meta>October 5, 2011&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Isammoc</div></header><div class=post-content><div class=paragraph><p>Il y a un an ou deux, j’ai utilisé mon temps libre pour mettre en place une mailing-list décrivant certains points de la programmation orientée objet, et les premiers sujets étaient tout naturellement les design patterns. Je profite donc de l’ouverture de mon blog pour ne pas perdre ces données.</p></div><div class=sect1><h2 id=_description_du_problème>Description du problème<a hidden class=anchor aria-hidden=true href=#_description_du_problème>#</a></h2><div class=sectionbody><div class=paragraph><p>Nous désirons un type dont on ne peut avoir qu’une seule instance (ou un
nombre limité d’instances) durant toute l’exécution du programme.
L’intérêt est de créer une instance commune car l’on a aucune utilité à
venir dupliquer des instances faisant finalement un travail commun et
répétitif. On se situe en fait dans une approche de classe à instance
unique.</p></div><div class=paragraph><p>Exemples de cas :</p></div><div class=ulist><ul><li><p>Gérer les propriétés de l’application dans son ensemble</p></li><li><p>Maintenir une connexion à une base de données</p></li><li><p>Maintenir un seul et même fichier dans un module de journalisation</p></li><li><p>Maintenir un objet gérant des données et valeurs globales tel qu’un cache.</p></li></ul></div><div class=paragraph><p>On verra que l’on peut utiliser le Singleton de façon complémentaire
d’autres pattern, tels que la fabrique abstraite, le monteur, le
prototype, ou état.</p></div></div></div><div class=sect1><h2 id=_description_de_la_solution>Description de la solution<a hidden class=anchor aria-hidden=true href=#_description_de_la_solution>#</a></h2><div class=sectionbody><div class=paragraph><p>Deux aspects majeurs du problème sont à prendre en compte.</p></div><div class=sect2><h3 id=_empêcher_la_création_de_multiples_instances_de_la_classe>Empêcher la création de multiples instances de la classe<a hidden class=anchor aria-hidden=true href=#_empêcher_la_création_de_multiples_instances_de_la_classe>#</a></h3><div class=paragraph><p>Le problème est vite réglé : il suffit de déclarer le constructeur comme
privé. Ainsi il sera impossible de créer une instance de la classe à
l’extérieur de la classe elle-même. On pourra également déclarer le
destructeur comme privé pour empêcher une destruction prématurée de
l’instance unique par mégarde.</p></div></div><div class=sect2><h3 id=_assurer_une_instance_de_la_classe>Assurer une instance de la classe<a hidden class=anchor aria-hidden=true href=#_assurer_une_instance_de_la_classe>#</a></h3><div class=paragraph><p>Pour cela, cette classe va posséder comme variable membre une référence
vers une instance d’elle-même. Pour que cette instance soit accessible
tout au long du programme, et donc pour qu’elle existe de sa création à
la fin du programme, on va déclarer cet objet comme <code>static</code>.</p></div><div class=imageblock><div class=content><img src=http://yuml.me/diagram/scruffy/class/%5BSingleton%7C-instance%7C%2BgetInstance()%3ASingleton%3B%5D,%5BSingleton%5D--%5Bnote%3AAjoutez%20tous%20les%20attributs%20et%20m%C3%A9thodes%20n%C3%A9cessaires%7Bbg%3Acornsilk%7D%5D%2C%20%5BSingleton%5D--%5Bnote%3A%20Le%20constructeur%20de%20la%20classe%20doit%20%C3%AAtre%20priv%C3%A9%7Bbg%3Acornsilk%7D%5D alt="Diagramme de classe du pattern Singleton"></div><div class=title>Figure 1. Diagramme de classe du pattern singleton</div></div><div class=paragraph><p>Exemple en java</p></div><div class=paragraph><p>Directement copié collé depuis Wikipédia :</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-java data-lang=java> public class Singleton {
     private static Singleton INSTANCE = null;

     /**
      * La présence d&#39;un constructeur privé supprime
      * le constructeur public par défaut.
      */
     private Singleton() {}

     /**
      * Le mot-clé synchronized sur la méthode de création
      * empêche toute instanciation multiple même par
      * différents threads.
      * Retourne l&#39;instance du singleton.
      */
     public synchronized static Singleton getInstance() {
         if (INSTANCE == null)
             INSTANCE = new Singleton();
         return INSTANCE;
     }
 }</code></pre></div></div></div></div></div><div class=sect1><h2 id=_conséquences>Conséquences<a hidden class=anchor aria-hidden=true href=#_conséquences>#</a></h2><div class=sectionbody><div class=paragraph><p>Nous avons donc un et un seul objet. Que ce soit pour utiliser moins de
mémoire, ou pour partager des données d’un bout à l’autre de l’application.</p></div><div class=paragraph><p>Il faut néanmoins penser au multi-threading, et donc la règle générale
veut que la méthode statique getInstance ne puisse être accédée par un
seul thread en même temps (pour assurer l’unicité de l’instance) ainsi
que ses autres méthodes si nécessaires.</p></div></div></div><div class=sect1><h2 id=_références>Références<a hidden class=anchor aria-hidden=true href=#_références>#</a></h2><div class=sectionbody><div class=paragraph><p>Wikipédia</p></div><div class=ulist><ul><li><p><a href=http://fr.wikipedia.org/wiki/Singleton_(patron_de_conception) class=bare>http://fr.wikipedia.org/wiki/Singleton_(patron_de_conception)</a></p></li><li><p><a href=http://en.wikipedia.org/wiki/Singleton_pattern class=bare>http://en.wikipedia.org/wiki/Singleton_pattern</a></p></li></ul></div><div class=paragraph><p>Java village</p></div><div class=ulist><ul><li><p><a href=http://jvillage.wordpress.com/2007/06/19/design-pattern-de-creation-singleton/ class=bare>http://jvillage.wordpress.com/2007/06/19/design-pattern-de-creation-singleton/</a></p></li></ul></div><div class=paragraph><p>Developpez.com</p></div><div class=ulist><ul><li><p><a href=http://smeric.developpez.com/java/uml/singleton/ class=bare>http://smeric.developpez.com/java/uml/singleton/</a></p></li></ul></div><div class=paragraph><p>Autres</p></div><div class=ulist><ul><li><p><a href=http://tfc.duke.free.fr/coding/singleton.html class=bare>http://tfc.duke.free.fr/coding/singleton.html</a></p></li><li><p><a href=http://www.journaldunet.com/developpeur/tutoriel/jav/070911-design-pattern-singleton/2.shtml class=bare>http://www.journaldunet.com/developpeur/tutoriel/jav/070911-design-pattern-singleton/2.shtml</a></p></li></ul></div></div></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.isammoc.net/tags/java/>java</a></li><li><a href=https://blog.isammoc.net/tags/design-pattern/>design pattern</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://blog.isammoc.net/>Au coin d'une table</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script defer src=/assets/js/highlight.min.b5c50a006af5240e8b9a820c9517fc939c995c2503cb822fca9c6177c10b9926.js integrity="sha256-tcUKAGr1JA6LmoIMlRf8k5yZXCUDy4Ivypxhd8ELmSY=" onload=hljs.initHighlightingOnLoad();></script><script>window.onload=function(){if(localStorage.getItem("menu-scroll-position")){document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position");}}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);if(!window.matchMedia('(prefers-reduced-motion: reduce)').matches){document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});}else{document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();}
if(id==="top"){history.replaceState(null,null," ");}else{history.pushState(null,null,`#${id}`);}});});var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft);}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{if(document.body.className.includes("dark")){document.body.classList.remove('dark');localStorage.setItem("pref-theme",'light');}else{document.body.classList.add('dark');localStorage.setItem("pref-theme",'dark');}})</script></body></html>