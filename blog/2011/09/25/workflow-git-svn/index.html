<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Workflow git-svn | Au coin d'une table</title><meta name=keywords content="git,svn,workflow"><meta name=description content="Git en tant que client SVN"><meta name=author content="Isammoc"><link rel=canonical href=https://blog.isammoc.net/blog/2011/09/25/workflow-git-svn/><link href=/assets/css/stylesheet.min.0ef71315edca03ac3fb4b85c2eaba80d9aa9c097f62b53e704ebe8e433907e89.css integrity="sha256-DvcTFe3KA6w/tLhcLquoDZqpwJf2K1PnBOvo5DOQfok=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.isammoc.net/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.isammoc.net/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.isammoc.net/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.isammoc.net/apple-touch-icon.png><link rel=mask-icon href=https://blog.isammoc.net/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.80.0"><meta property="og:title" content="Workflow git-svn"><meta property="og:description" content="Git en tant que client SVN"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.isammoc.net/blog/2011/09/25/workflow-git-svn/"><meta property="article:published_time" content="2011-09-25T00:00:00+00:00"><meta property="article:modified_time" content="2011-09-25T00:00:00+00:00"><meta property="og:site_name" content="Au coin d'une table"><meta name=twitter:card content="summary"><meta name=twitter:title content="Workflow git-svn"><meta name=twitter:description content="Git en tant que client SVN"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blogs","item":"https://blog.isammoc.net/blog/"},{"@type":"ListItem","position":2,"name":"Workflow git-svn","item":"https://blog.isammoc.net/blog/2011/09/25/workflow-git-svn/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Workflow git-svn","name":"Workflow git-svn","description":"Dans mon entreprise actuelle, git n’est pas encore réellement utilisé.Déjà qu’il y a à peine un an, c’est CVS qui primait, il ne faut pas trop demander.Actuellement, donc, notre …","keywords":["git","svn","workflow"],"articleBody":"Dans mon entreprise actuelle, git n’est pas encore réellement utilisé.Déjà qu’il y a à peine un an, c’est CVS qui primait, il ne faut pas trop demander.Actuellement, donc, notre gestionnaire de sources officiel est SVN.Mais comme le serveur central n’est pas dans l’agence dans laquelle je travaille, cela se révèle pénible à chaque rafraichissement ou à chaque visionnage de l’historique (Environ 10 minutes chrono pour voir l’historique d’un fichier).N’en pouvant plus, et ayant récemment découvert le bonheur d’utilisation de git, je me suis décidé à l’utiliser en tant que client SVN puisque cela est possible grâce à git-svn.\n Importer la base La première chose à faire est donc de charger la base SVN en local avec la commande :\n $ git svn clone -s http://repo.svn/repertoirePrincipal mondepot   Ce qui va créer un dépôt git dans le répertoire local mondepot\n -s permet de dire à git-svn que le dépôt suit les conventions standards pour les répertoires trunk/tags/branches.\n Pour moi, cela a pris énormément de temps, dans les 36 heures. Mais c’est parce que le dépôt SVN est conséquent : 3 ans de développement pour un workspace pesant dans les 2 Gio et il y a toujours le problème du serveur distant et de la faible connexion.\n   Travailler À partir du moment où j’ai récupéré la base, les choses se sont tout de suite améliorées. Je pouvais donc avoir les logs, les différentes versions d’un fichier en quelques secondes plutôt qu’en quelques minutes, et cela m’a changé la vie.\n J’ai également profité pleinement des branches : ma branche master étant reliée à la trunk d’SVN, je me mettais sur une autre branche pour travailler tout en synchronisant régulièrement ma branche principale.\n Exemple pour ma super fonctionnalité (en partant de `master) :\n $ git svn rebase   Pour me mettre à jour par rapport à SVN.\n $ git checkout -b super_fonctionnalité   Pour créer et travailler dans la nouvelle branche super_fonctionnalité. Et là, je peux modifier des fichiers, commiter, re-modifier des fichiers, recommiter, etc.\n $ ... (modification de code) $ git add . $ git commit $ ... (autant de fois que nécessaire)   Lorsque je sais que d’autres ont fait des choses, je peux me synchroniser :\n $ git checkout master $ git svn rebase $ git checkout super_fonctionnalité $ git rebase master   En détail :\n   Je me replace dans la branche master\n  Je rafraichis le dépôt par rapport à SVN\n  Je me remets dans la branche super_fonctionnalité\n  Je rejoue mes modifications après celle du SVN\n   Le dernier rebase est nécessaire, car git gère très bien les merge, mais SVN beaucoup moins. Du coup, il vaut mieux que l’historique soit plutôt linéaire pour éviter les problèmes lors de la remontée sur le serveur SVN.\n A ce moment, je peux continuer à coder ma super fonctionnalité en sachant que j’ai les modifications des collègues (grâce au rebase). Lorsque j’ai fini ma super fonctionnalité, il me reste à l’envoyer sur le serveur SVN :\n $ git checkout master $ git merge --ff-only super_fonctionnalité $ git branch -d super_fonctionnalité $ git svn rebase \u0026\u0026 git svn dcommit   Ce qui donne en détail :\n   Je me replace dans la branche master\n  Je récupère les modifications de ma super fonctionnalité dans la branche courante\n  Je supprime ma branche super_fonctionnalité\n  Je me remets à jour avec le dépôt SVN et j’envoie sur le serveur SVN mes commits git\n   Oui, oui, pour chaque commit git, il y aura un commit SVN, d’où l’intérêt de pouvoir faire des squash si nécessaire AVANT l’envoi sur le serveur distant.\n   Chez le client Là où git prend tout son sens, c’est avec des serveurs multiples. Je vais donc vous expliquer ce que j’ai utilisé lorsque nous sommes allés en intégration chez le client.\n Nous devions aller chez le client pour une phase d’intégration (comprendre finir les développements et faire les modifications de dernière minute que le client demande). Mais dans les locaux du client, nous n’avons pas accès à notre serveur SVN, et pour partager nos développements entre les trois collègues, j’ai tout naturellement mis un dépôt git nu (--bare) dans un répertoire partagé et le tour est joué.\n Du coup, lorsque nous avons ramené nos machines dans nos locaux, nous avons pu mettre à jour le serveur SVN avec des commits séparés pour chaque développement. Avouez que c’est mieux qu’un gros commit avec toutes les modifications que l’on a faites pendant les deux semaines qu’a duré l’intégration. (Dans mon exemple, c’étaient 80 commits à remonter sur le serveur SVN).\n   Conclusion Malgré devoir faire attention à la linéarité de l’historique, j’ai fait ce petit constat :\n   moi content, parce que j’utilise git au boulot et que j’ai amené les collègues à l’utiliser également ;\n  les collègues intéressés car on a pu partager nos développements sans les soucis de merger manuellement des fichiers par clefs USB;\n  et la qualité contente, car les commits sont séparés sur le SCM.\n   Le retour a été plus que satisfaisant sur toute la ligne.\n À qui le tour ?\n   ","wordCount":"826","inLanguage":"en","datePublished":"2011-09-25T00:00:00Z","dateModified":"2011-09-25T00:00:00Z","author":{"@type":"Person","name":"Isammoc"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.isammoc.net/blog/2011/09/25/workflow-git-svn/"},"publisher":{"@type":"Organization","name":"Au coin d'une table","logo":{"@type":"ImageObject","url":"https://blog.isammoc.net/favicon.ico"}}}</script></head><body id=top><script>if(localStorage.getItem("pref-theme")==="dark"){document.body.classList.add('dark');}else if(localStorage.getItem("pref-theme")==="light"){document.body.classList.remove('dark')}else if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');}</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://blog.isammoc.net/ accesskey=h title="Au coin d'une table (Alt + H)"><img src=/apple-touch-icon.png alt=logo aria-label=logo height=35>Au coin d'une table</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu onscroll=menu_on_scroll()><li><a href=https://blog.isammoc.net/categories/ title=categories><span>categories</span></a></li><li><a href=https://blog.isammoc.net/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Workflow git-svn</h1><div class=post-description>Git en tant que client SVN</div><div class=post-meta>September 25, 2011&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Isammoc</div></header><div class=post-content><div class=paragraph><p>Dans mon entreprise actuelle, git n’est pas encore réellement utilisé.Déjà qu’il y a à peine un an, c’est CVS qui primait, il ne faut pas trop demander.Actuellement, donc, notre gestionnaire de sources officiel est SVN.Mais comme le serveur central n’est pas dans l’agence dans laquelle je travaille, cela se révèle pénible à chaque rafraichissement ou à chaque visionnage de l’historique (Environ 10 minutes chrono pour voir l’historique d’un fichier).N’en pouvant plus, et ayant récemment découvert le bonheur d’utilisation de git, je me suis décidé à l’utiliser en tant que client SVN puisque cela est possible grâce à git-svn.</p></div><div class=sect1><h2 id=_importer_la_base>Importer la base<a hidden class=anchor aria-hidden=true href=#_importer_la_base>#</a></h2><div class=sectionbody><div class=paragraph><p>La première chose à faire est donc de charger la base SVN en local avec la commande :</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>$ git svn clone -s http://repo.svn/repertoirePrincipal mondepot</code></pre></div></div><div class=paragraph><p>Ce qui va créer un dépôt git dans le répertoire local <code>mondepot</code></p></div><div class=paragraph><p><code>-s</code> permet de dire à git-svn que le dépôt suit les conventions standards pour les répertoires <code>trunk/tags/branches</code>.</p></div><div class=paragraph><p>Pour moi, cela a pris <strong>énormément</strong> de temps, dans les 36 heures. Mais c’est parce que le dépôt SVN est conséquent : 3 ans de développement pour un workspace pesant dans les 2 Gio et il y a toujours le problème du serveur distant et de la faible connexion.</p></div></div></div><div class=sect1><h2 id=_travailler>Travailler<a hidden class=anchor aria-hidden=true href=#_travailler>#</a></h2><div class=sectionbody><div class=paragraph><p>À partir du moment où j’ai récupéré la base, les choses se sont tout de suite améliorées. Je pouvais donc avoir les logs, les différentes versions d’un fichier en quelques secondes plutôt qu’en quelques minutes, et cela m’a changé la vie.</p></div><div class=paragraph><p>J’ai également profité pleinement des branches : ma branche <code>master</code> étant reliée à la <code>trunk</code> d’SVN, je me mettais sur une autre branche pour travailler tout en synchronisant régulièrement ma branche principale.</p></div><div class=paragraph><p>Exemple pour ma super fonctionnalité (en partant de `master) :</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>$ git svn rebase</code></pre></div></div><div class=paragraph><p>Pour me mettre à jour par rapport à SVN.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>$ git checkout -b super_fonctionnalité</code></pre></div></div><div class=paragraph><p>Pour créer et travailler dans la nouvelle branche <code>super_fonctionnalité</code>.
Et là, je peux modifier des fichiers, commiter, re-modifier des fichiers, recommiter, etc.</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>$ ... (modification de code)
$ git add .
$ git commit
$ ... (autant de fois que nécessaire)</code></pre></div></div><div class=paragraph><p>Lorsque je sais que d’autres ont fait des choses, je peux me synchroniser :</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>$ git checkout master
$ git svn rebase
$ git checkout super_fonctionnalité
$ git rebase master</code></pre></div></div><div class=paragraph><p>En détail :</p></div><div class=ulist><ul><li><p>Je me replace dans la branche <code>master</code></p></li><li><p>Je rafraichis le dépôt par rapport à SVN</p></li><li><p>Je me remets dans la branche <code>super_fonctionnalité</code></p></li><li><p>Je rejoue mes modifications après celle du SVN</p></li></ul></div><div class=paragraph><p>Le dernier <code>rebase</code> est nécessaire, car git gère très bien les merge, mais SVN beaucoup moins. Du coup, il vaut mieux que l’historique soit plutôt linéaire pour éviter les problèmes lors de la remontée sur le serveur SVN.</p></div><div class=paragraph><p>A ce moment, je peux continuer à coder ma super fonctionnalité en sachant que j’ai les modifications des collègues (grâce au <code>rebase</code>).
Lorsque j’ai fini ma super fonctionnalité, il me reste à l’envoyer sur le serveur SVN :</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>$ git checkout master
$ git merge --ff-only super_fonctionnalité
$ git branch -d super_fonctionnalité
$ git svn rebase &amp;&amp; git svn dcommit</code></pre></div></div><div class=paragraph><p>Ce qui donne en détail :</p></div><div class=ulist><ul><li><p>Je me replace dans la branche <code>master</code></p></li><li><p>Je récupère les modifications de ma super fonctionnalité dans la branche courante</p></li><li><p>Je supprime ma branche <code>super_fonctionnalité</code></p></li><li><p>Je me remets à jour avec le dépôt SVN et j’envoie sur le serveur SVN mes commits git</p></li></ul></div><div class=paragraph><p>Oui, oui, pour chaque commit git, il y aura un commit SVN, d’où l’intérêt de pouvoir faire des squash si nécessaire <strong>AVANT</strong> l’envoi sur le serveur distant.</p></div></div></div><div class=sect1><h2 id=_chez_le_client>Chez le client<a hidden class=anchor aria-hidden=true href=#_chez_le_client>#</a></h2><div class=sectionbody><div class=paragraph><p>Là où git prend tout son sens, c’est avec des serveurs multiples. Je vais donc vous expliquer ce que j’ai utilisé lorsque nous sommes allés en intégration chez le client.</p></div><div class=paragraph><p>Nous devions aller chez le client pour une phase d’intégration (comprendre finir les développements et faire les modifications de dernière minute que le client demande). Mais dans les locaux du client, nous n’avons pas accès à notre serveur SVN, et pour partager nos développements entre les trois collègues, j’ai tout naturellement mis un dépôt git nu (--bare) dans un répertoire partagé et le tour est joué.</p></div><div class=paragraph><p>Du coup, lorsque nous avons ramené nos machines dans nos locaux, nous avons pu mettre à jour le serveur SVN avec des commits séparés pour chaque développement. Avouez que c’est mieux qu’un gros commit avec toutes les modifications que l’on a faites pendant les deux semaines qu’a duré l’intégration. (Dans mon exemple, c’étaient 80 commits à remonter sur le serveur SVN).</p></div></div></div><div class=sect1><h2 id=_conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#_conclusion>#</a></h2><div class=sectionbody><div class=paragraph><p>Malgré devoir faire attention à la linéarité de l’historique, j’ai fait ce petit constat :</p></div><div class=ulist><ul><li><p>moi content, parce que j’utilise git au boulot et que j’ai amené les collègues à l’utiliser également ;</p></li><li><p>les collègues intéressés car on a pu partager nos développements sans les soucis de merger manuellement des fichiers par clefs USB;</p></li><li><p>et la qualité contente, car les commits sont séparés sur le SCM.</p></li></ul></div><div class=paragraph><p>Le retour a été plus que satisfaisant sur toute la ligne.</p></div><div class=paragraph><p>À qui le tour ?</p></div></div></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.isammoc.net/tags/git/>git</a></li><li><a href=https://blog.isammoc.net/tags/svn/>svn</a></li><li><a href=https://blog.isammoc.net/tags/workflow/>workflow</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://blog.isammoc.net/>Au coin d'une table</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script defer src=/assets/js/highlight.min.b5c50a006af5240e8b9a820c9517fc939c995c2503cb822fca9c6177c10b9926.js integrity="sha256-tcUKAGr1JA6LmoIMlRf8k5yZXCUDy4Ivypxhd8ELmSY=" onload=hljs.initHighlightingOnLoad();></script><script>window.onload=function(){if(localStorage.getItem("menu-scroll-position")){document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position");}}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);if(!window.matchMedia('(prefers-reduced-motion: reduce)').matches){document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});}else{document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();}
if(id==="top"){history.replaceState(null,null," ");}else{history.pushState(null,null,`#${id}`);}});});var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft);}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{if(document.body.className.includes("dark")){document.body.classList.remove('dark');localStorage.setItem("pref-theme",'light');}else{document.body.classList.add('dark');localStorage.setItem("pref-theme",'dark');}})</script></body></html>